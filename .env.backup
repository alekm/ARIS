# ARIS Environment Configuration
# Copy this file to .env and update with your settings

# ============================================
# API Configuration
# ============================================
API_PORT=8000
API_HOST=0.0.0.0

# ============================================
# Redis Configuration
# ============================================
REDIS_HOST=redis
REDIS_PORT=6379

# ============================================
# Audio Capture Configuration
# ============================================
# Mode: mock, kiwi, or hackrf
MODE=kiwi

# KiwiSDR settings (for mode: kiwi)
# TODO: Update these tomorrow when your KiwiSDR is online
KIWI_HOST=172.16.250.99
KIWI_PORT=8073
KIWI_PASSWORD=

# Frequency and demodulation
FREQUENCY_HZ=3892000
DEMOD_MODE=LSB

# ============================================
# STT (Speech-to-Text) Configuration
# ============================================
# Model size: tiny, base, small, medium, large-v2, large-v3
MODEL_SIZE=medium

# Device: cuda or cpu
DEVICE=cuda

# Voice activity detection threshold (0.0-1.0)
VAD_THRESHOLD=0.5

# Energy threshold for speech detection (RMS level, 0.0-1.0)
# Higher values = less sensitive, fewer false positives from noise
ENERGY_THRESHOLD=0.1

# ============================================
# LLM Configuration
# ============================================
# Backend: ollama, llama-cpp, or openai-compatible
LLM_BACKEND=openai

# Model name/tag
LLM_MODEL=gemma-3-12b-it-abliterated.q5_k_m.gguf

# LLM server host (for Docker: use host.docker.internal or service name)
# For local deployment: localhost:11434
# For Docker: host.docker.internal:11434
# For Kubernetes/Docker Swarm: use service name or external IP
LLM_HOST=host.docker.internal:5000

# API key (if required for OpenAI-compatible backends)
LLM_API_KEY=

# ============================================
# Database Configuration
# ============================================
DATABASE_URL=sqlite:////data/db/aris.db

# ============================================
# HackRF Configuration (for mode: hackrf)
# ============================================
HACKRF_SERIAL=
RF_SAMPLE_RATE=48000
LNA_GAIN=16
VGA_GAIN=20
BANDWIDTH=1750000

# HackRF Gain Guidance:
# LNA_GAIN: Low Noise Amplifier (0-40 dB in 8 dB steps)
#   - Lower values (0-16): Better for strong signals, less noise
#   - Higher values (24-40): Better for weak signals, more noise
#   - Default 16 is good starting point for HF (3-30 MHz)
# 
# VGA_GAIN: Variable Gain Amplifier (0-62 dB in 2 dB steps)
#   - Lower values (0-20): Better for strong signals, prevents overload
#   - Higher values (30-62): Better for weak signals, risk of overload
#   - Default 20 is conservative and good for most HF signals
#
# For 40m band (7.2 MHz):
#   - Start with LNA_GAIN=16, VGA_GAIN=20 (current defaults)
#   - If signals are too weak: Increase LNA_GAIN to 24 or 32
#   - If signals are too strong/distorted: Decrease VGA_GAIN to 10-16
#   - Watch for overload/distortion - reduce gains if you see it
